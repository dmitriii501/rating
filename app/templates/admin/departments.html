{% extends "base.html" %}
{% block title %}Админ — Отделы{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
	<h1 class="h5">Отделы</h1>
	<a class="btn btn-outline-danger" href="{{ url_for('admin.logout') }}">Выйти</a>
	</div>
<div class="row g-3">
	<div class="col-lg-6">
		<div class="p-3 bg-white rounded border">
			<div class="fw-semibold mb-2">Список отделов</div>
			<ul class="list-group">
				{% for d in departments %}
				<li class="list-group-item d-flex justify-content-between">
					<div>
						<div class="fw-semibold">{{ d.name }}</div>
						<div class="small text-muted">Участников: {{ d.users.count() }}</div>
					</div>
					<form method="post" action="{{ url_for('admin.delete_department', dept_id=d.id) }}">
						<button class="btn btn-sm btn-outline-danger" type="submit">Удалить</button>
					</form>
				</li>
				{% endfor %}
			</ul>
			{% if not departments %}
				<div class="text-muted">Пока нет отделов.</div>
			{% endif %}
		</div>
	</div>
	<div class="col-lg-6">
		<div class="p-3 bg-white rounded border">
			<div class="fw-semibold mb-2">Добавить отдел</div>
			<form method="post">
				<div class="mb-3">
					<label class="form-label">Название</label>
					<input class="form-control" type="text" name="name" required>
				</div>
				<button class="btn btn-dark" type="submit">Добавить</button>
			</form>
		</div>
	</div>
</div>
{% endblock %}


